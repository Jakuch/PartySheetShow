<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <title>Party Sheet Show</title>

</head>
<body>
<div th:replace="~{templates :: navbar('','','active','','')}"></div>
<main class="container-fluid">
    <div class="row">
        <div class="col-3"></div>
        <nav class="col-6 navbar navbar-expand-md navbar-dark bg-dark border border-4 border-dark rounded mt-2">
            <div class="container-fluid">
                <div class="collapse navbar-collapse" id="navbar2">
                    <div class="nav-item me-auto mb-2 mb-md-0">
                        <a th:href="@{/characters}" class="btn btn-success me-2">
                            Back
                        </a>
                    </div>
                    <ul class="navbar-nav">
                        <a class="btn btn-success me-2" th:if="${mode == 'view'}"
                           th:href="@{/characters/{id}(id=${character.id}, mode='edit')}">
                            Edit
                        </a>
                        <a class="btn btn-danger me-2" th:if="${mode == 'edit'}"
                           th:href="@{/characters/{id}(id=${character.id}, mode='view')}">
                            Cancel
                        </a>
                        <button class="btn btn-success me-2" th:if="${mode == 'edit'}" type="submit" form="editForm">
                            Save
                        </button>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="col-3"></div>
    </div>
    <form class="row" id="editForm"
          th:action="@{/characters/{id}(id=${character.id})}"
          th:object="${editForm}"
          method="post">
        <div class="col-3 text-end">
            <div class="bg-dark text-light mt-2 border border-4 border-dark rounded text-end hide collapse collapse-horizontal float-end"
                 id="test-collapse-left">
                DUPA
            </div>
        </div>
        <div class="col-6 d-inline-flex flex-column p-3 text-center bg-dark text-light mt-2 border border-4 border-dark rounded">
            <div class="row">
                <div class="col-2">
                    <div class="text-success border-0" style="margin-top: 0.35rem !important">
                        Name
                    </div>
                </div>
                <div class="col-2">
                    <div class="text-success border-0" style="margin-top: 0.35rem !important">
                        Player
                    </div>
                </div>
                <div class="col-2">
                    <button type="button"
                            class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                            data-bs-toggle="collapse" data-bs-target="#level-collapse" aria-expanded="true">
                        Level
                    </button>
                </div>
                <div class="col-2">
                    <div class="text-success border-0" style="margin-top: 0.35rem !important">
                        Race
                    </div>
                </div>
                <div class="col-4">
                    <div class="text-success border-0" style="margin-top: 0.35rem !important">
                        Class
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4 border border-2 rounded">
                    <div class="row">
                        <div class="col-6 mt-1 mb-2" th:text="${character.name}">
                            Name
                        </div>
                        <div class="col-6 mt-1 mb-2" th:text="${character.playerName}">
                            Player
                        </div>
                    </div>
                </div>
                <div class="col-2 border border-2 rounded">
                    <div th:if="${character.level}">
                        <div class="row">
                            <div class="col-3"></div>
                            <div class="col-6 mt-1 mb-2">
                                <div th:if="${mode == 'view'}" th:text="${character.level.getNumericValue()}">
                                    level
                                </div>
                                <select th:if="${mode == 'edit'}" class="form-control text-center" type="text"
                                        th:field="*{level}">
                                    <option th:each="lvl : ${levels}"
                                            th:value="${lvl}"
                                            th:text="${lvl.getNumericValue()}">
                                </select>
                            </div>
                            <div class="col-3"></div>
                        </div>
                        <div class="row">
                            <div class="col mt-1 mb-2 text-end">
                                Proficiency bonus
                            </div>
                            <div class="col mt-1 mb-2 text-start"
                                 th:text="${character.level.proficiencyBonus}">ProficiencyBonus
                            </div>
                        </div>
                        <div class="collapse hide" id="level-collapse">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li>
                                    <div class="col">Experience points</div>
                                    <div class="col link-body-emphasis d-inline-flex text-decoration-none rounded"
                                         th:text="${character.currentExperiencePoints}">CurrentExp
                                    </div>
                                    /
                                    <div class="col link-body-emphasis d-inline-flex text-decoration-none rounded"
                                         th:text="${character.level.nextLevelExperience}">NextLvlExp
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-2 border border-2 rounded">
                    <div class="row">
                        <div class="col-8 mt-1 mb-2 text-end" th:text="${character.race.name}">
                            race
                        </div>
                        <div class="col-4 text-start mt-1">
                            <button class="badge rounded-circle btn btn-success border-0 btn-toggle"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#desc-collapse-race" aria-expanded="false"
                                    aria-controls="desc-collapse-race"> >
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-4 border border-2 rounded">
                    <div th:each="characterClass : ${character.characterClasses}">
                        <div class="row">
                            <div class="col-4 mt-1 mb-2 text-end" th:text="${characterClass.name}">
                                class
                            </div>
                            <div class="col-4 mt-1 mb-2">
                                <div th:if="${mode == 'view'}" th:text="${characterClass.level.getNumericValue()}">
                                    level
                                </div>
                                <select th:if="${mode == 'edit'}" class="form-control text-center" type="text"
                                        th:field="*{classes[__${characterClass.srdKey}__].level}">
                                    <option th:each="lvl : ${levels}"
                                            th:value="${lvl}"
                                            th:text="${lvl.getNumericValue()}">
                                </select>
                            </div>
                            <div class="col-4 text-start mt-1">
                                <button class="badge rounded-circle btn btn-success border-0 btn-toggle"
                                        type="button"
                                        data-bs-toggle="collapse"
                                        th:attr="data-bs-target=${'#collapse-' + characterClass.srdKey}, aria-controls=${'collapse-' + characterClass.srdKey}"
                                        aria-expanded="false"> >
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="row">
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12">
                                    <button type="button"
                                            class="btn  btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                            data-bs-toggle="collapse" data-bs-target="#abilities-collapse"
                                            aria-expanded="true">
                                        Abilities
                                    </button>
                                </div>
                            </div>
                            <div class="row border border-2 rounded">
                                <div class="col-12  collapse show" id="abilities-collapse">
                                    <div class="row" th:unless="${#lists.isEmpty(character.abilities)}"
                                         th:each="abilityName : ${abilityNames}">
                                        <div class="col-6" th:text="${abilityName.getSrdKey()}">name</div>
                                        <div class="col-3"
                                             style="padding-left: 0px !important; padding-right: 0px !important">
                                            <div th:if="${mode == 'view'}"
                                                 th:text="${character.getAbility(abilityName.getSrdKey()).getTotalValue()}">
                                                val
                                            </div>
                                            <input th:if="${mode == 'edit'}"
                                                   class="form-control text-center"
                                                   th:field="*{abilities[__${abilityName}__]}">
                                        </div>
                                        <div class="col-3"
                                             th:text="${character.getAbility(abilityName.getSrdKey()).getAbilityBonus()}">
                                            bonus
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <button type="button"
                                            class="btn  btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                            data-bs-toggle="collapse" data-bs-target="#saving-throws-collapse"
                                            aria-expanded="true">
                                        Saving throws
                                    </button>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12 collapse show" id="saving-throws-collapse">
                                    <div class="row" th:each="savingThrow : ${character.savingThrows}">
                                        <div class="col-7" th:text="${savingThrow.getDisplayName()}"
                                             style="padding-right: 0px !important">name
                                        </div>
                                        <div class="col-1" th:text="${savingThrow.proficiency.getShortName()}"
                                             style="padding-left: 0px !important; padding-right: 0px !important">profi
                                        </div>
                                        <div class="col-2 text-center"
                                             th:text="${savingThrow.getTotalValue(character.level)}"
                                             style="padding-left: 0px !important; padding-right: 0px !important">value
                                        </div>
                                        <div class="col-2"
                                             th:switch="${savingThrow.getAdvantage()}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 mt-1 mb-1">
                                    <div class="text-success border-0">Senses</div>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12" th:each="passiveSense: ${character.passiveSenses}">
                                    <div class="row text-center align-items-center">
                                        <div class="col-6" th:text="${passiveSense.name.getDisplayName()}">
                                            passive
                                        </div>
                                        <div class="col-2" th:text="${passiveSense.proficiency.getShortName()}">
                                            proficiency
                                        </div>
                                        <div class="col-2" th:text="${passiveSense.getTotalValue(character.level)}">
                                            value
                                        </div>
                                        <div class="col-2"
                                             th:switch="${passiveSense.advantage}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12" th:each="trait: ${character.race.traits}"
                                     th:if="${trait.key.srdName} == 'Darkvision'">
                                    <div class="row text-center align-items-center">
                                        <div class="col-6" th:text="${trait.key.srdName}">darkvision</div>
                                        <div class="col-6" th:text="${trait.value}">30</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 mt-1 mb-1">
                                    <div class="text-success border-0">Defenses</div>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12">Additional defenses like specific advantages etc.</div>
                            </div>
                            <div class="row">
                                <div class="col-12 mt-1 mb-1">
                                    <div class="text-success border-0">Conditions</div>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12">Current conditions</div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12">
                                    <button type="button"
                                            class="btn  btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                            data-bs-toggle="collapse" data-bs-target="#skills-collapse"
                                            aria-expanded="true">
                                        Skills
                                    </button>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12 collapse show" id="skills-collapse">
                                    <div class="row" th:each="skillName : ${skillNames}">
                                        <div class="col-7" th:text="${character.getSkillDisplayName(skillName.srdKey)}">
                                            name
                                        </div>
                                        <div class="col-1"
                                             th:text="${character.getSkillProficiencyShortName(skillName.srdKey)}">
                                            profi
                                        </div>
                                        <div class="col-2" th:text="${character.getSkill(skillName.srdKey).getTotalValue(character.level)}">
                                            value
                                        </div>
                                        <div class="col-2"
                                             th:switch="${character.getSkillAdvantage(skillName.srdKey)}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                    <div class="row" th:each="toolProfi : ${character.toolProficiencies}">
                                        <div class="col-7" th:text="${toolProfi.name}">
                                            name
                                        </div>
                                        <div class="col-1"
                                             th:text="${toolProfi.proficiency.shortName}">
                                            profi
                                        </div>
                                        <div class="col-2" th:text="${toolProfi.value}">
                                            value
                                        </div>
                                        <div class="col-2"
                                             th:switch="${toolProfi.advantage}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                    <div class="row" th:each="customSkill : ${character.customSkills}">
                                        <div class="col-7" th:text="${customSkill.name}">
                                            name
                                        </div>
                                        <div class="col-1"
                                             th:text="${customSkill.proficiency.shortName}">
                                            profi
                                        </div>
                                        <div class="col-2" th:text="${customSkill.value}">
                                            value
                                        </div>
                                        <div class="col-2"
                                             th:switch="${customSkill.advantage}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                    <div th:if="${mode == 'edit'}">
                                        <div class="text-center border-top">Add custom skill</div>
                                        <div class="row d-inline-flex">
                                            <div class="col-12">
                                                 <div class="row">
                                                     <div class="col-6">
                                                         <label>Name</label>
                                                         <input class="form-control">
                                                     </div>
                                                     <div class="col-6">
                                                         <label>Value</label>
                                                         <input class="form-control">
                                                     </div>
                                                 </div>
                                                <div class="row">
                                                    <div class="col-6">
                                                        <label>Proficiency</label>
                                                        <select class="form-control mb-2">
                                                            <option th:each="prf : ${proficiencies}"
                                                                    th:value="${prf}"
                                                                    th:text="${prf.name}">
                                                        </select>
                                                    </div>
                                                    <div class="col-6">
                                                        <label>Advantage</label>
                                                        <select class="form-control mb-2">
                                                            <option th:each="adv : ${advantages}"
                                                                    th:value="${adv}"
                                                                    th:text="${adv.name}">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <button type="button"
                                            class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                            data-bs-toggle="collapse" data-bs-target="#proficiencies-collapse"
                                            aria-expanded="true">
                                        Proficiencies
                                    </button>
                                </div>
                            </div>
                            <div class="row border border-2 rounded text-start">
                                <div class="col-12 collapse show" id="proficiencies-collapse"
                                     th:each="charClass : ${character.characterClasses}">
                                    <div class="row">
                                        <div class="col-12 text-success text-center" th:text="${charClass.name}">
                                            class
                                        </div>
                                    </div>
                                    <div class="row" th:unless="${#lists.isEmpty(charClass.classProficiencies.armor)}">
                                        <div class="border-bottom">Armors</div>
                                        <ul class="col-12 mb-3 list-unstyled">
                                            <li th:each="armor : ${charClass.classProficiencies.armor}"
                                                th:text="${armor}">Armor
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="row"
                                         th:unless="${#lists.isEmpty(charClass.classProficiencies.weapons)}">
                                        <div class="border-bottom border-top">Weapons</div>
                                        <ul class="col-12 mb-3 list-unstyled">
                                            <li th:each="weapon : ${charClass.classProficiencies.weapons}"
                                                th:text="${weapon}">Weapon
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="row"
                                         th:unless="${#lists.isEmpty(charClass.classProficiencies.tools)}">
                                        <div class="border-bottom">Tools</div>
                                        <ul class="col-12 mb-3 list-unstyled">
                                            <li th:each="tool : ${charClass.classProficiencies.tools}"
                                                th:text="${tool}">Tools
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <button type="button"
                                    class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                    data-bs-toggle="collapse" data-bs-target="#inventory-list-collapse"
                                    aria-expanded="true">
                                Inventory
                            </button>
                        </div>
                    </div>
                    <div class="row border border-2 rounded">
                        <div class="col-12 collapse show" id="inventory-list-collapse">
                            <div class="row">
                                <div class="col-4">Name</div>
                                <div class="col-4">Quantity</div>
                                <div class="col-4">Notes</div>
                            </div>
                            <div class="row">
                                <div class="col-4">Item 1</div>
                                <div class="col-4">3</div>
                                <div class="col-4">Notes 1</div>
                            </div>
                            <div class="row">
                                <div class="col-4">Item 2</div>
                                <div class="col-4">5</div>
                                <div class="col-4">Notes 2</div>
                            </div>
                            <div class="row">
                                <div class="col-4">Item 3</div>
                                <div class="col-4">1</div>
                                <div class="col-4">Notes 3</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 text-center">
                    <div class="row">
                        <div class="col-12">
                            <button type="button"
                                    class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                    data-bs-toggle="collapse" data-bs-target="#basic-stats-collapse"
                                    aria-expanded="true">
                                Basic Stats
                            </button>
                        </div>
                    </div>
                    <div class="row border border-2 rounded">
                        <div class="col-12 collapse show" id="basic-stats-collapse">
                            <div class="row">
                                <div class="col-1 border-end">
                                    <div>
                                        <div class="col-12">AC</div>
                                    </div>
                                    <div>
                                        <div class="col-12" th:text="${character.armorClass}">AC</div>
                                    </div>
                                </div>
                                <div class="col-2 border-end">
                                    <div>
                                        <div class="col-12">Speed (ft)</div>
                                    </div>
                                    <div>
                                        <div class="col-12" th:text="${character.walkingSpeed}">speed</div>
                                    </div>
                                </div>
                                <div class="col-3 border-end">
                                    <div>
                                        <div class="col-12">Initiative Bonus</div>
                                    </div>
                                    <div class="d-inline-flex">
                                        <div class="col-10"
                                             th:text="${character.initiative.getTotalValue(character.level)}">
                                            initiative
                                        </div>
                                        <div class="col-2"
                                             th:switch="${character.initiative.getAdvantage()}">
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).ADVANTAGE}"
                                                  class="badge rounded-circle text-bg-success p-2">
                                                <span class="visually-hidden">A</span>
                                            </span>
                                            <span th:case="${T(com.jakuch.PartySheetShow.player.character.model.Advantage).DISADVANTAGE}"
                                                  class="badge rounded-circle text-bg-danger p-2">
                                                <span class="visually-hidden">D</span>
                                            </span>
                                            <span th:case="*"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-2 border-end">
                                    <div class="row">
                                        <div class="col-12">Current HP</div>
                                    </div>
                                    <div class="row" th:if="${mode == 'view'}">
                                        <div class="col-12" th:text="${character.health.current}">curHp</div>
                                    </div>
                                    <input th:if="${mode == 'edit'}"
                                           class="form-control text-center"
                                           th:field="*{currentHealth}" th:value="*{currentHealth}">
                                </div>
                                <div class="col-2 border-end">
                                    <div class="row">
                                        <div class="col-12">Temp HP</div>
                                    </div>
                                    <div class="row" th:if="${mode == 'view'}">
                                        <div class="col-12" th:text="${character.health.temporary}">tempHp</div>
                                    </div>
                                    <input th:if="${mode == 'edit'}"
                                           class="form-control text-center"
                                           th:field="*{temporaryHealth}" th:value="*{temporaryHealth}">
                                </div>
                                <div class="col-2">
                                    <div class="row">
                                        <div class="col-12">Max HP</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12" th:text="${character.health.max}">maxHp</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="border-top">Hit Dices</div>
                                <div class="d-inline-flex border border-2 rounded"
                                     th:each="diceEntry : ${character.health.hitDices.entrySet()}"
                                     th:if="${diceEntry.value > 0}">
                                    <div class="col" th:text="${diceEntry.value}"></div>
                                    <div class="col" th:text="${diceEntry.key.name}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <button type="button"
                                    class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                    data-bs-toggle="collapse" data-bs-target="#actions-list-collapse"
                                    aria-expanded="true">
                                Actions
                            </button>
                        </div>
                    </div>
                    <div class="row border border-2 rounded">
                        <div class="col-12 collapse show" id="actions-list-collapse">
                            <div class="row">
                                <div class="border-bottom">
                                    <div class="text-start row">
                                        <button type="button"
                                                class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                                data-bs-toggle="collapse" data-bs-target="#actions-collapse"
                                                aria-expanded="true">
                                            Actions
                                        </button>
                                    </div>
                                    <div class="collapse show" id="actions-collapse">
                                        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                            <li>
                                                <div class="col">Action 1</div>
                                            </li>
                                            <li>
                                                <div class="col">Action 2</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="border-bottom">
                                    <div class="text-start row">
                                        <button type="button"
                                                class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                                data-bs-toggle="collapse" data-bs-target="#bonus-actions-collapse"
                                                aria-expanded="true">
                                            Bonus Actions
                                        </button>
                                    </div>
                                    <div class="collapse show" id="bonus-actions-collapse">
                                        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                            <li>
                                                <div class="col">Bonus Action 1</div>
                                            </li>
                                            <li>
                                                <div class="col">Bonus Action 2</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="border-bottom">
                                    <div class="text-start row">
                                        <button type="button"
                                                class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                                data-bs-toggle="collapse" data-bs-target="#reaction-collapse"
                                                aria-expanded="true">
                                            Reactions
                                        </button>
                                    </div>
                                    <div class="collapse show" id="reaction-collapse">
                                        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                            <li>
                                                <div class="col">Reaction 1</div>
                                            </li>
                                            <li>
                                                <div class="col">Reaction 2</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <button type="button"
                                    class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                    data-bs-toggle="collapse" data-bs-target="#spells-list-collapse"
                                    aria-expanded="true">
                                Spells
                            </button>
                        </div>
                    </div>
                    <div class="row border border-2 rounded">
                        <div class="col-12 collapse show" id="spells-list-collapse">
                            <div class="row">
                                <div class="border-bottom">
                                    <div class="text-start row">
                                        <button type="button"
                                                class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                                data-bs-toggle="collapse" data-bs-target="#cantrips-collapse"
                                                aria-expanded="true">
                                            Cantrips
                                        </button>
                                    </div>
                                    <div class="collapse show" id="cantrips-collapse">
                                        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                            <li>
                                                <div class="col">Cantrip 1</div>
                                            </li>
                                            <li>
                                                <div class="col">Cantrip 2</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <button type="button"
                                        class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                        data-bs-toggle="collapse" data-bs-target="#spells-1-collapse"
                                        aria-expanded="true">
                                    Level 1
                                </button>
                                <div class="collapse show" id="spells-1-collapse">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        <li>
                                            <div class="col">Spell slots</div>
                                        </li>
                                        <li>
                                            <div class="col">Spell 1</div>
                                        </li>
                                        <li>
                                            <div class="col">Spell 2</div>
                                        </li>
                                    </ul>
                                </div>
                                <button type="button"
                                        class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                        data-bs-toggle="collapse" data-bs-target="#spells-2-collapse"
                                        aria-expanded="true">
                                    Level 2
                                </button>
                                <div class="collapse show" id="spells-2-collapse">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        <li>
                                            <div class="col">Spell slots</div>
                                        </li>
                                        <li>
                                            <div class="col">Spell 1</div>
                                        </li>
                                        <li>
                                            <div class="col">Spell 2</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <button class="btn btn-outline-success btn-toggle d-inline-flex align-items-center rounded border-0"
                                    data-bs-toggle="collapse" data-bs-target="#feats-list-collapse"
                                    aria-expanded="true">
                                Feats
                            </button>
                        </div>
                    </div>
                    <div class="row border border-2 rounded">
                        <div class="col-12 collapse show" id="feats-list-collapse">
                            Feats
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-3">
            <div th:each="charClass : ${character.characterClasses}"
                 class="bg-dark text-light text-start text-wrap mt-2 border border-4 border-dark rounded collapse multi-collapse collapse-horizontal hide float-start overflow-auto"
                 style="max-width: 23vw" th:id="${'collapse-' + charClass.srdKey}">
                <div th:text="${charClass.name}" class="text-center text-success">name</div>
                <ul th:each="feature: ${charClass.getClassLevelFeatures()}" class="list-unstyled mb-2 ms-2">
                    <div th:if="${feature.gainedAtLevel.getNumericValue()} <= ${charClass.level.getNumericValue()}">
                        <li th:text="${feature.name}" class="border-bottom">feature.name</li>
                        <li th:text="${feature.getDisplayGainedAt()}">gainedAt</li>
                        <li th:text="${feature.description}">feature.description</li>
                    </div>
                </ul>
                <div class="btn btn-success border-0 btn-toggle w-100"
                     type="button"
                     th:attr="data-bs-target=${'#show-all-collapse-' + charClass.srdKey}, aria-controls=${'show-all-collapse-' + charClass.srdKey}"
                     data-bs-toggle="collapse"
                     aria-expanded="false">Show all
                </div>
                <ul th:each="feature: ${charClass.getClassLevelFeatures()}" class="list-unstyled mb-2 ms-2">
                    <div class="collapse" th:id="${'show-all-collapse-' + charClass.srdKey}"
                         th:if="${feature.gainedAtLevel.getNumericValue()} > ${charClass.level.getNumericValue()}">
                        <li th:text="${feature.name}" class="border-bottom">feature.name</li>
                        <li th:text="${feature.getDisplayGainedAt()}">gainedAt</li>
                        <li th:text="${feature.description}">feature.description</li>
                    </div>
                </ul>
            </div>
            <div class="bg-dark text-light text-start  mt-2 border border-4 border-dark rounded collapse multi-collapse collapse-horizontal hide float-start overflow-auto"
                 style="max-width: 23vw" id="desc-collapse-race">
                <div th:text="${character.race.name}" class="text-center text-success">name</div>
                <ul th:each="trait: ${character.race.traits}" class="list-unstyled mb-2 ms-2">
                    <div th:if="${trait.key.srdName} != 'Specific'">
                        <li th:text="${trait.key}" class="border-bottom">key</li>
                        <li th:text="${trait.value}">value</li>
                    </div>
                    <div th:if="${trait.key.srdName} == 'Specific'">
                        <li th:text="${trait.key}" class="border-bottom">
                            specific
                        </li>
                        <ul th:each="entry : ${trait.value}"
                            class="list-unstyled">
                            <li>
                                <div class="col-4 border-bottom" th:text="${entry.key}">key</div>
                            </li>
                            <li class="mb-2" th:text="${entry.value}">value</li>
                        </ul>
                    </div>
                </ul>
            </div>
            <div class="row bg-dark text-light text-start text-wrap mt-2 border border-4 border-dark rounded collapse multi-collapse collapse-horizontal hide float-start overflow-auto"
                 style="max-width: 23vw" id="test-collapse-right3">
                DUPA
            </div>
        </div>
    </form>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>
</html>